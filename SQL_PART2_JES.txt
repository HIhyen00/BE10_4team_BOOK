-- 외래 키는 NULL 허용하지 않는 것이 일반적
-- 수량은 필수이고 0보다 커야 함
-- 내용이 공백 리뷰, 게시물 허용
-- CREATED_AT 자동 등록되도록 DEFAULT CURRENT_TIMESTAMP

CREATE TABLE ORDER_ITEM(
    ID INT PRIMARY KEY,
    ORDER_ID INT NOT NULL,
    BOOK_ID INT NOT NULL,
    QUANTITY INT NOT NULL CHECK (QUANTITY > 0),
    FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ID),
    FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID)
    );

CREATE TABLE REVIEW(
    ID INT PRIMARY KEY,
    USER_ID INT NOT NULL,
    BOOK_ID INT NOT NULL,
    RATING TINYINT NOT NULL CHECK (RATING BETWEEN 1 AND 5),
    CONTENT TEXT,
    CREATED_AT DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (USER_ID) REFERENCES USER(ID),
    FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID)
);

CREATE TABLE FAQ(
    ID INT PRIMARY KEY,
    TITLE VARCHAR(255) NOT NULL,
    CONTENT TEXT,
    CREATED_AT DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);